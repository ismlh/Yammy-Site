<h2 class="fw-bolder text-md-center mb-5">Reservations Opreations</h2>


<table class="table table-striped table-bordered border-black text-md-center">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">Phone</th>
      <th scope="col">Booking Date</th>
      <th scope="col">Booking Time</th>
      <th scope="col">Number of Peoples</th>
      <th scope="col">Message</th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody class="text-center">
    @for (reservation of Reservations; track reservation.id) {
    <tr>
      <th>{{reservation.id}}</th>
      <th>{{reservation.Name}}</th>
      <th>{{reservation.Email}}</th>
      <th>{{reservation.Phone}}</th>

      <th>{{reservation.Date}}</th>
      <th>{{reservation.Time}}</th>
      <th>{{reservation.numsOfPeople}}</th>
      <th>{{reservation.Message}}</th>
      <th><button class="btn btn-outline-info form-control"
        (click)="updateReservationData(reservation.id)">Edit</button></th>
      <th><button class="btn btn-outline-danger form-control" (click)="deletereservation(reservation.id)">Delete</button></th>
    </tr>
    }
  </tbody>
</table>

@if(Reservation.id!=null){



<form #resForm="ngForm" (ngSubmit)="updateReservation()">



  <div>
    <label for="">Client Name</label>
    <input type="text" class="form-control my-3" placeholder="Reservation Name" #Name="ngModel" pattern="^[a-zA-Z\s]+$"
      required [(ngModel)]="Reservation.Name" name="Name" />
    <!-- Show error messages for Reservation Name -->
    <div *ngIf="Name.invalid && Name.touched" class="text-danger">
      <div *ngIf="Name.errors?.['required']">Reservation Name is required.</div>
      <div *ngIf="Name.errors?.['pattern']">Reservation Name must only contain letters
      </div>
    </div>
  </div>


  <div>
    <label for="">Client Email</label>

    <input type="text" class="form-control my-3" placeholder="Reservation Email" #Email="ngModel"
       required [(ngModel)]="Reservation.Email" name="Email" />
    <!-- Show error messages for Reservation Email -->
    <div *ngIf="Email.invalid && Email.touched" class="text-danger">
      <div *ngIf="Email.errors?.['required']">Reservation Email is required.</div>
    </div>
  </div>

  <div>
    <label for="">Client Phone</label>

    <input type="text" class="form-control my-3" placeholder="Reservation Phone" #Phone="ngModel"
      required [(ngModel)]="Reservation.Phone" name="Phone" pattern="^01(0|1|2|5)[0-9]{8}"/>
    <!-- Show error messages for Reservation Phone -->
    <div *ngIf="Phone.invalid && Phone.touched" class="text-danger">
      <div *ngIf="Phone.errors?.['required']">Reservation Phone is required.</div>
      <div *ngIf="Phone.errors?.['pattern']">Reservation Phone must be correct Phone Number
      </div>
    </div>
  </div>

<div class="row gy-4">
  <label for="">Client Reservation Date</label>

  <div class="col-md-4">
    <input type="date" class="form-control my-3" [(ngModel)]="Reservation.Date" placeholder="Reservation Date" #Date="ngModel"
      [(ngModel)]="Reservation.Date" name="Date" required="" />
      <div *ngIf="Date.invalid && Date.touched" class="text-danger">
        <div *ngIf="Date.errors?.['required']">Reservation Date is required.</div>
      </div>
  </div>

  <div class="col-md-4">
    <label for="">Reservation Time</label>

    <input type="time" class="form-control my-3" [(ngModel)]="Reservation.Time" placeholder="Reservation Time" #Time="ngModel"
      [(ngModel)]="Reservation.Time" name="Time" required/>
      <div *ngIf="Time.invalid && Time.touched" class="text-danger">
        <div *ngIf="Time.errors?.['required']">Reservation Time is required.</div>
      </div>
  </div>

  <div class="col-md-4">
    <label for="">Number Of Clients</label>

    <input type="number" class="form-control my-3" min="1" [(ngModel)]="Reservation.numsOfPeople" placeholder="Reservation Number" #numsOfPeople="ngModel"
      [(ngModel)]="Reservation.numsOfPeople" name="numsOfPeople" required/>
      <div *ngIf="numsOfPeople.invalid && numsOfPeople.touched" class="text-danger">
        <div *ngIf="numsOfPeople.errors?.['required']">Reservation numsOfPeople is required.</div>
      </div>
  </div>

</div>



<div class="mb-3">
  <input type="text" class="form-control my-3" placeholder="Reservation Message" #Message="ngModel"
    [(ngModel)]="Reservation.Message" name="Message" />

</div>


  <button class="btn btn-outline-success form-control" [disabled]="resForm.invalid">Save</button>

</form>


}

